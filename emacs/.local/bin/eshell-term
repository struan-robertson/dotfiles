#!/bin/sh

case "${1:-}" in
    --new)
        shift
        path="${1:-$(pwd)}"
        emacsclient -c -n -e "(let ((eshell-buffer-name \"terminal\") (current-prefix-arg '(4)) (default-directory \"$path\")) (call-interactively 'eshell))"
        ;;
    ""|*)
        path="${1:-$(pwd)}"
        emacsclient -c -n -e "(let ((eshell-buffer-name \"terminal\") (default-directory \"$path\")) (eshell))"
        ;;
esac
